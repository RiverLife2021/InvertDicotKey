# Dichotomous Key Application

## Development

## Project setup
```
yarn install
```

##Key data

Key data is stored in `src/assets/keyData.json`

The structure is a nested object:

```
key_id: {
  title: "Key title description string",
  couplets: {
    couplet_id: {
      a: {
        label: "Text description",
        path: "path to next couplet/endpoint"
      },
      b: {
        ...
      }
    }
  }
}
```
A key can have any number of couplets. A couplet can have any number of questions.

The `path` takes the following format:

`/key/x/y` - Link points to key x, couplet y.
`https://example.com` - Link points to an external webpage (for 'endpoints').

NOTE: Since the key is JSON, any quotes will need to be correctly escaped - i.e. `"has a \"tail\" and \"horns\"."`

## Updating images

Images are stored in `src/public/images` - in directories matching the key-couplet-question they are associated with.

Each image should have a thumbnail stored in the `thumb` subdirectory relative to the main image. Thumbnails must be `400px` in `height`, but can be any `width`.

A question can have any number of images.

Images metadata is recorded in `src/assets/images.json` - do not edit this file directly!

To update images, modify image files in `/src/public/images`, then from the project root directory, run:

`node makeImages.js`

## Developing the app

To develop the app you will need a system with [NodeJS](https://nodejs.org/en/) and [Yarn](https://yarnpkg.com/) installed.

To test the app while developing, run:

```
yarn serve
```

The link to the test app will be shown in the command output.

## Building the app

To build the app for production, run:

```
yarn build
```
The built application is written to `/dist`. Copy the entire contents (including subdirectories) to the production webserver.

By default the app expects to be served from the `/dichot` path on the website, e.g. `http://example.com/dichot`

This can be changed by editing both of:
* `publicPath` value in `vue.config.js`
* `public/.htaccess`
